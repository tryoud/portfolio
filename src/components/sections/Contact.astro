---
interface Props {
  site: typeof import("../../../content/site.json");
  lang?: "de" | "en";
}
const { site, lang = "de" } = Astro.props;
const contact = site.contact ?? {};
const headline = contact.headline ?? "Let's build something memorable.";
const subline = contact.subline ?? "Reach out to discuss how I can help with your project.";
const socials = contact.socials ?? [];
const bookingUrl = contact.bookingUrl ?? "";
const links = site.links as { email?: string; github?: string; linkedin?: string; instagram?: string } | undefined;
const instagramUrl = links?.instagram ?? site.media?.instagramProfileUrl;

const formCopy = lang === "en"
  ? {
      nameLabel: "Name",
      namePlaceholder: "Your name",
      emailLabel: "Email",
      emailPlaceholder: "your@email.com",
      subjectLabel: "Subject",
      subjectPlaceholder: "What's it about?",
      messageLabel: "Message",
      messagePlaceholder: "Your message …",
      submitLabel: "Send message",
      privacyNote: "By submitting, you agree that your details are used to respond to your request.",
    }
  : {
      nameLabel: "Name",
      namePlaceholder: "Dein Name",
      emailLabel: "E-Mail",
      emailPlaceholder: "deine@email.de",
      subjectLabel: "Betreff",
      subjectPlaceholder: "Worum geht's?",
      messageLabel: "Nachricht",
      messagePlaceholder: "Deine Nachricht …",
      submitLabel: "Nachricht senden",
      privacyNote: "Mit dem Absenden willigst du ein, dass deine Angaben zur Beantwortung deiner Anfrage genutzt werden.",
    };
---

<footer id="contact" class="border-t border-zinc-100 bg-white pt-24 pb-12" aria-labelledby="contact-heading">
  <div class="mx-auto max-w-7xl px-6">
    <div class="mb-24 flex flex-col items-center text-center">
      <h2 id="contact-heading" class="font-display mb-8 text-5xl italic text-zinc-900 md:text-6xl">{headline}</h2>
      {subline ? <p class="mb-8 max-w-md text-lg text-zinc-600">{subline}</p> : null}
      <form
        action="https://formspree.io/f/mzdakanj"
        method="POST"
        class="w-full max-w-xl space-y-5 text-left"
      >
        <input type="text" name="_gotcha" class="hidden" tabindex="-1" autocomplete="off" />
        <div>
          <label for="name" class="mb-1.5 block text-sm font-medium text-zinc-700">{formCopy.nameLabel}</label>
          <input
            id="name"
            name="name"
            type="text"
            required
            autocomplete="name"
            class="w-full rounded-2xl border border-zinc-200/70 bg-white px-4 py-3 text-zinc-900 shadow-sm transition-colors placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2"
            placeholder={formCopy.namePlaceholder}
          />
        </div>
        <div>
          <label for="email" class="mb-1.5 block text-sm font-medium text-zinc-700">{formCopy.emailLabel}</label>
          <input
            id="email"
            name="email"
            type="email"
            required
            autocomplete="email"
            class="w-full rounded-2xl border border-zinc-200/70 bg-white px-4 py-3 text-zinc-900 shadow-sm transition-colors placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2"
            placeholder={formCopy.emailPlaceholder}
          />
        </div>
        <div>
          <label for="subject" class="mb-1.5 block text-sm font-medium text-zinc-700">{formCopy.subjectLabel}</label>
          <input
            id="subject"
            name="subject"
            type="text"
            autocomplete="off"
            class="w-full rounded-2xl border border-zinc-200/70 bg-white px-4 py-3 text-zinc-900 shadow-sm transition-colors placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2"
            placeholder={formCopy.subjectPlaceholder}
          />
        </div>
        <div>
          <label for="message" class="mb-1.5 block text-sm font-medium text-zinc-700">{formCopy.messageLabel}</label>
          <textarea
            id="message"
            name="message"
            required
            rows={5}
            class="w-full rounded-2xl border border-zinc-200/70 bg-white px-4 py-3 text-zinc-900 shadow-sm transition-colors placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 resize-y min-h-[120px]"
            placeholder={formCopy.messagePlaceholder}
          />
        </div>
        <div>
          <button
            type="submit"
            class="inline-flex rounded-2xl border border-zinc-200/70 bg-zinc-900 px-5 py-3 text-sm font-medium text-white shadow-sm transition-colors hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2"
          >
            {formCopy.submitLabel}
          </button>
          <p class="mt-3 text-xs text-zinc-500 max-w-md">
            {formCopy.privacyNote}
          </p>
        </div>
      </form>
    </div>
    {bookingUrl ? (
      <div class="flex flex-wrap items-center gap-4 -mt-16">
        <a
          href={bookingUrl}
          class="inline-flex rounded-lg border border-zinc-200 bg-white px-5 py-2.5 text-sm font-medium text-zinc-700 transition-colors hover:bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2"
        >
          Book a call
        </a>
      </div>
    ) : null}
    <div class="mt-16 flex flex-col gap-6 border-t border-zinc-200/70 pt-10 text-sm text-zinc-500 md:flex-row md:justify-between md:items-center">
      <p class="order-2 md:order-1">© {new Date().getFullYear()} {site.name}.</p>
      <nav class="order-1 md:order-2 flex flex-wrap items-center gap-x-8 gap-y-2" aria-label="Footer links">
        {links?.email && (
          <a href={links.email} class="hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 rounded transition-colors">E-Mail</a>
        )}
        {instagramUrl && (
          <a href={instagramUrl.replace(/\/?$/, "")} target="_blank" rel="noreferrer noopener" class="hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 rounded transition-colors">Instagram</a>
        )}
        {links?.github && (
          <a href={links.github} target="_blank" rel="noreferrer noopener" class="hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 rounded transition-colors">GitHub</a>
        )}
        {links?.linkedin && (
          <a href={links.linkedin} target="_blank" rel="noreferrer noopener" class="hover:text-zinc-900 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 rounded transition-colors">LinkedIn</a>
        )}
      </nav>
    </div>
  </div>
</footer>
