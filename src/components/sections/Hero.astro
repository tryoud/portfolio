---
const { site } = Astro.props;
const hero = site.hero ?? {};
const headline = hero.headline ?? "Hey, there";
const badgeText = hero.badgeText ?? "";
const portraitSrc = (hero.portraitSrc && String(hero.portraitSrc).trim()) || "/hero/Nikolas_Maerker_hero.webp";
const primaryCta = hero.primaryCta ?? { label: "Let's talk", href: "#contact" };
const secondaryCta = hero.secondaryCta ?? { label: "View work", href: "#work" };
const primaryHref = typeof primaryCta === "object" && primaryCta.href ? primaryCta.href : "#contact";
const primaryLabel = typeof primaryCta === "object" && primaryCta.label ? primaryCta.label : "Let's talk";
const secondaryHref = typeof secondaryCta === "object" && secondaryCta.href ? secondaryCta.href : "#work";
const secondaryLabel = typeof secondaryCta === "object" && secondaryCta.label ? secondaryCta.label : "View work";
const specialization = hero.specialization ?? "";
const nameLine = site.name ?? "";
const roleLine = site.role ?? "";
const nameUpper = nameLine.toUpperCase().replace(/\s+/g, " ");
const roleUpper = roleLine.toUpperCase();
const greetingParts = (headline || "Hey, there").split(/,\s*/);
const greetingLeft = greetingParts[0] ? `${greetingParts[0]},` : "Hey,";
const greetingRight = greetingParts[1] ?? "there";
---

<section id="top" class="relative flex min-h-screen flex-col overflow-hidden pt-32 pb-20 gradient-mesh" aria-labelledby="hero-heading">
  <div class="relative z-10 mx-auto flex max-w-6xl flex-col items-center px-6">
    {badgeText ? (
      <div class="mb-8 inline-flex items-center gap-2 rounded-full border border-zinc-200/70 bg-white px-4 py-1.5 shadow-sm">
        <span class="relative flex h-2.5 w-2.5" aria-hidden="true">
          <span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-amber-400 opacity-75" />
          <span class="relative inline-flex h-2.5 w-2.5 rounded-full bg-amber-500" />
        </span>
        <span class="text-xs font-medium uppercase tracking-wide text-zinc-600">{badgeText}</span>
      </div>
    ) : null}

    <div class="relative flex w-full min-h-[380px] flex-col items-center justify-center md:min-h-[500px] lg:min-h-[560px]">
      <h1 id="hero-heading" class="sr-only">{headline} â€” {nameLine}, {roleLine}</h1>
      <div class="pointer-events-none absolute inset-0 z-0 flex items-center justify-between px-4 md:px-10 lg:px-16" aria-hidden="true">
        <span class="font-display text-4xl font-medium italic leading-tight text-zinc-900/30 md:text-7xl md:text-zinc-900/40 lg:text-8xl xl:text-9xl">{greetingLeft}</span>
        <span class="font-display text-4xl font-medium italic leading-tight text-zinc-900/30 md:text-7xl md:text-zinc-900/40 lg:text-8xl xl:text-9xl">{greetingRight}</span>
      </div>
      <div class="relative z-10 mx-auto w-52 shrink-0 overflow-hidden rounded-t-[100px] rounded-b-[100px] border-4 border-white aspect-[3/4] bg-zinc-100 shadow-2xl shadow-zinc-900/15 md:w-72 md:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.2),0_0_60px_-10px_rgba(0,0,0,0.08)] lg:w-80 xl:w-[420px]">
        <img
          src={portraitSrc}
          alt=""
          class="h-full w-full object-cover object-center"
          width="420"
          height="560"
          loading="eager"
          decoding="async"
          fetchpriority="high"
        />
      </div>
      <div class="relative z-20 mt-8 flex flex-col items-center gap-4 sm:flex-row sm:gap-5">
        <a
          href={primaryHref}
          class="inline-flex items-center justify-center rounded-xl bg-zinc-900 px-6 py-3 text-sm font-medium text-white shadow-md hover:bg-zinc-800 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 transition-colors"
        >
          {primaryLabel}
        </a>
        <a
          href={secondaryHref}
          class="inline-flex items-center justify-center rounded-xl border-2 border-zinc-900 px-6 py-3 text-sm font-medium text-zinc-900 hover:bg-zinc-50 focus:outline-none focus:ring-2 focus:ring-zinc-400 focus:ring-offset-2 transition-colors"
        >
          {secondaryLabel}
        </a>
      </div>
    </div>

    <div class="relative z-30 mx-auto mt-12 flex w-full max-w-6xl flex-col gap-8 px-6 md:flex-row md:items-end md:justify-between">
      <div class="flex flex-col gap-1">
        <span class="block select-none text-4xl font-bold uppercase tracking-tight text-zinc-200 md:text-6xl lg:text-7xl" aria-hidden="true">I AM</span>
        <span class="-mt-2 block text-4xl font-bold uppercase tracking-tight text-zinc-900 md:-mt-3 md:text-6xl lg:text-7xl" aria-hidden="true">{nameUpper}</span>
      </div>
      <div class="flex flex-col gap-4 md:items-end">
        <div class="flex flex-col gap-1 text-left md:text-right">
          <span class="block text-xl font-bold tracking-tight leading-snug text-zinc-900 md:text-3xl lg:text-4xl" aria-hidden="true">{roleUpper}</span>
          {specialization ? (
            <p class="mt-2 max-w-sm text-sm leading-relaxed text-zinc-600 md:text-base">{specialization}</p>
          ) : null}
        </div>
      </div>
    </div>
  </div>
</section>
